<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小希留学顾问系统</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <style>
        /* 方案卡片新布局样式 */
        .school-content {
            padding: 15px;
            position: relative;
        }

        .school-content .details-row {
            margin-bottom: 12px;
            display: flex;
            flex-direction: row;
            align-items: flex-start;
        }

        .school-content .details-label {
            width: 80px;
            font-size: 14px;
            color: #666;
            flex-shrink: 0;
        }

        .school-content .details-value {
            flex: 1;
            font-size: 14px;
            color: #333;
            line-height: 1.5;
        }

        .expanded-details .details-section {
            margin-bottom: 16px;
            padding: 12px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
        }

        .expanded-details .details-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }

        .expanded-details .details-content {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
            text-align: justify;
        }

        .tag-container .detail-chip {
            display: inline-block;
            padding: 4px 8px;
            margin-right: 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .tag-container .duration-chip {
            background-color: #e0f7fa;
            color: #00838f;
        }

        .tag-container .tuition-chip {
            background-color: #f9fbe7;
            color: #9e9d24;
        }

        /* 序号图标样式 */
        .scheme-number {
            position: absolute;
            top: -8px;
            left: -8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }

        /* 学校logo样式 */
        .school-card {
            position: relative;
            overflow: visible;
        }

        .school-logo {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 10px;
            background-color: white;
            border: 1px solid #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .school-logo img {
            width: 90%;
            height: 90%;
            object-fit: contain;
        }

        .school-name-container {
            display: flex;
            align-items: center;
        }

        /* 鍏ㄥ眬鏍峰紡 */
        :root {
            /* 涓昏壊璋� */
            --primary: #5473e8;
            --primary-light: #7a93f0;
            --primary-dark: #3d5acd;
            --primary-bg: #eef1ff;

            /* 杈呭姪鑹� */
            --secondary: #6c757d;
            --success: #4CAF50;
            --info: #03a9f4;
            --warning: #ff9800;
            --danger: #f44336;

            /* 鏂囨湰棰滆壊 */
            --text-primary: #333333;
            --text-secondary: #6c757d;
            --text-muted: #9e9e9e;

            /* 鑳屾櫙鑹� */
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-light: #f5f7fa;

            /* 杈规棰滆壊 */
            --border-color: #e0e0e0;
            --border-light: #f0f0f0;

            /* 闃村奖 */
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.1);

            /* 鍦嗚 */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 16px;

            /* 杩囨浮鍔ㄧ敾 */
            --transition: all 0.3s ease;

            /* 闂磋窛 */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;

            /* 鍥炬爣灏哄 */
            --icon-sm: 16px;
            --icon-md: 24px;
            --icon-lg: 32px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans SC', 'Poppins', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.5;
            overflow-x: hidden;
            position: relative;
            max-width: 100%;
        }

        /* 鍔犺浇鍔ㄧ敾 */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-primary);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s, visibility 0.5s;
        }

        .loader-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .loader-logo {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: var(--spacing-lg);
            position: relative;
        }

        .loader-logo::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
            border-radius: var(--radius-sm);
            transform: scaleX(0);
            transform-origin: left;
            animation: loader-line 1.5s ease infinite;
        }

        @keyframes loader-line {
            0% {
                transform: scaleX(0);
            }

            50% {
                transform: scaleX(1);
            }

            100% {
                transform: scaleX(0);
            }
        }

        .loader-spinner {
            position: relative;
            width: 60px;
            height: 60px;
            margin-bottom: var(--spacing-lg);
        }

        .spinner-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 4px solid var(--primary-bg);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: loader-spin 1s linear infinite;
        }

        @keyframes loader-spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .loader-text {
            font-size: 16px;
            color: var(--text-secondary);
            max-width: 300px;
        }

        .loader-hidden {
            opacity: 0;
            visibility: hidden;
        }

        .page-container {
            display: flex;
            min-height: 100vh;
            max-width: 100%;
            position: relative;
            overflow-x: hidden;
        }

        /* 婊氬姩鏉¤嚜瀹氫箟 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background-color: var(--bg-light);
            border-radius: var(--radius-md);
        }

        ::-webkit-scrollbar-thumb {
            background-color: var(--secondary);
            border-radius: var(--radius-md);
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: var(--primary-light);
        }

        /* 宸︿晶瀵艰埅鏍忔牱寮 */
        .sidebar {
            width: 220px;
            background: linear-gradient(to bottom, var(--bg-primary) 0%, var(--bg-primary) 100%);
            box-shadow: var(--shadow-md);
            display: flex;
            flex-direction: column;
            height: 100vh;
            position: sticky;
            top: 0;
            transition: var(--transition);
            z-index: 10;
            overflow: hidden;
            flex-shrink: 0;
        }

        .logo-area {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid var(--border-light);
            padding: 0 var(--spacing-lg);
            transition: var(--transition);
        }

        .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
            letter-spacing: -0.5px;
            position: relative;
            transition: var(--transition);
        }

        .logo-text::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 40px;
            height: 3px;
            border-radius: var(--radius-sm);
            background-color: var(--primary);
            transition: var(--transition);
        }

        .nav-menu {
            flex: 1;
            padding: var(--spacing-md) 0;
            overflow-y: auto;
        }

        .nav-item {
            padding: var(--spacing-md) var(--spacing-lg);
            cursor: pointer;
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            transition: var(--transition);
            position: relative;
            margin-bottom: var(--spacing-xs);
            font-size: 13px;
        }

        .nav-item i {
            margin-right: var(--spacing-md);
            font-size: 16px;
        }

        .nav-item span {
            transition: var(--transition);
        }

        .nav-item:hover {
            background-color: rgba(84, 115, 232, 0.05);
            color: var(--primary);
        }

        .nav-item.active {
            background-color: rgba(84, 115, 232, 0.1);
            color: var(--primary);
            font-weight: 500;
            border-left: 3px solid var(--primary);
            padding-left: calc(var(--spacing-lg) - 3px);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background-color: var(--primary);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            transition: var(--transition);
        }

        .with-submenu {
            display: flex;
            flex-direction: column;
        }

        .nav-item-main {
            display: flex;
            align-items: center;
            padding: var(--spacing-md) var(--spacing-lg);
            cursor: pointer;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .nav-item-main i:first-child {
            margin-right: var(--spacing-md);
            font-size: var(--icon-md);
        }

        .toggle-icon {
            margin-left: auto;
            font-size: var(--icon-sm);
            transition: var(--transition);
        }

        .submenu {
            background-color: rgba(84, 115, 232, 0.03);
            padding-left: var(--spacing-xl);
            display: none;
        }

        .submenu-item {
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            color: var(--text-secondary);
            transition: var(--transition);
            font-size: 13px;
        }

        .submenu-item:hover {
            color: var(--primary);
        }

        .vip-section {
            padding: var(--spacing-md) var(--spacing-lg);
            background: linear-gradient(135deg, rgba(255, 251, 235, 0.7) 0%, rgba(255, 248, 225, 0.7) 100%);
            border-top: 1px solid var(--border-light);
            margin: var(--spacing-md) var(--spacing-md);
            border-radius: var(--radius-md);
            transition: var(--transition);
        }

        .vip-label {
            font-weight: 600;
            font-size: 15px;
            color: #d4b106;
            transition: var(--transition);
        }

        .vip-info {
            font-size: 13px;
            color: var(--text-secondary);
            margin: var(--spacing-xs) 0 var(--spacing-md);
            transition: var(--transition);
        }

        .btn-challenge {
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-xs) var(--spacing-md);
            font-weight: 500;
            font-size: 12px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 2px 6px rgba(255, 152, 0, 0.2);
        }

        .btn-challenge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .feedback-button {
            margin-top: var(--spacing-md);
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition);
        }

        .feedback-button i {
            margin-right: var(--spacing-sm);
            transition: var(--transition);
        }

        .feedback-button:hover {
            color: var(--primary);
        }

        .bottom-nav {
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-light);
            cursor: pointer;
            transition: var(--transition);
        }

        .bottom-nav i {
            margin-right: var(--spacing-md);
            transition: var(--transition);
        }

        .bottom-nav:hover {
            color: var(--primary);
        }

        /* 涓昏鍐呭鍖哄煙鍖呰鍣 */
        .main-content-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: calc(100% - 220px);
            overflow-x: hidden;
        }

        /* 椤堕儴瀵艰埅鏍 */
        .top-header {
            height: 70px;
            background-color: var(--bg-primary);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--spacing-xl);
            position: sticky;
            top: 0;
            z-index: 5;
            transition: var(--transition);
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .breadcrumbs {
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .breadcrumb-item {
            margin: 0 var(--spacing-xs);
        }

        .breadcrumb-item.active {
            color: var(--primary);
            font-weight: 500;
        }

        .breadcrumb-item+.bi {
            margin: 0 var(--spacing-xs);
            font-size: 12px;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
        }

        .header-icon {
            font-size: var(--icon-md);
            color: var(--text-secondary);
            cursor: pointer;
            position: relative;
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .header-icon:hover {
            background-color: var(--bg-light);
            color: var(--primary);
        }

        .notification-icon .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background-color: var(--danger);
            color: white;
            font-size: 10px;
            font-weight: 600;
            padding: 2px 5px;
            border-radius: 10px;
            transition: var(--transition);
        }

        .ai-icon {
            background-color: var(--primary-bg);
            color: var(--primary);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-weight: 500;
            transition: var(--transition);
        }

        .ai-icon:hover {
            background-color: var(--primary-light);
            color: white;
        }

        .header-user {
            display: flex;
            align-items: center;
            cursor: pointer;
            color: var(--text-primary);
            transition: var(--transition);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-md);
        }

        .header-user:hover {
            background-color: var(--bg-light);
        }

        .user-avatar-small {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin-right: var(--spacing-sm);
            object-fit: cover;
            transition: var(--transition);
            border: 2px solid var(--primary-bg);
        }

        .header-user span {
            margin-right: var(--spacing-sm);
            font-weight: 500;
        }

        .header-user i {
            font-size: 12px;
        }

        /* 涓昏鍐呭鍖哄煙鍜岀煡璇嗗簱鍖哄煙鐨勫竷灞€ */
        .content-and-knowledge-base {
            display: flex;
            padding: var(--spacing-md);
            gap: var(--spacing-md);
            overflow-x: hidden;
            flex-wrap: nowrap;
        }

        .content-area {
            flex: 7;
            min-width: 0;
            max-width: none;
        }

        .knowledge-base-area {
            flex: 3;
            min-width: 280px;
            max-width: 380px;
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            position: relative;
            display: flex;
            align-items: center;
            margin-right: auto;
        }

        .section-title::before {
            content: '';
            display: inline-block;
            width: 3px;
            height: 18px;
            background-color: var(--primary);
            margin-right: var(--spacing-sm);
            border-radius: var(--radius-sm);
        }

        .link-btn {
            color: var(--primary);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            transition: var(--transition);
        }

        .link-btn:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }

        .card {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-lg);
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        /* 娆㈣繋鍖哄煙 */
        .greeting-section {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg) var(--spacing-xl);
            box-shadow: var(--shadow-sm);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .greeting-section::before {
            content: '';
            position: absolute;
            top: -100px;
            right: -100px;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(84, 115, 232, 0.1) 0%, rgba(84, 115, 232, 0) 70%);
            border-radius: 50%;
            z-index: 0;
        }

        .greeting {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            position: relative;
            z-index: 1;
        }

        .greeting-text-container {
            display: flex;
            align-items: center;
        }

        .greeting-icon {
            font-size: 24px;
            margin-right: var(--spacing-sm);
            animation: wave 2s infinite;
            transform-origin: 70% 70%;
            display: inline-block;
        }

        @keyframes wave {
            0% {
                transform: rotate(0deg);
            }

            10% {
                transform: rotate(14deg);
            }

            20% {
                transform: rotate(-8deg);
            }

            30% {
                transform: rotate(14deg);
            }

            40% {
                transform: rotate(-4deg);
            }

            50% {
                transform: rotate(10deg);
            }

            60% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(0deg);
            }
        }

        .greeting-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .task-count {
            color: var(--text-secondary);
            font-size: 15px;
        }

        .action-buttons {
            position: relative;
            z-index: 1;
        }

        .full-btn {
            color: #fff;
            background-color: var(--primary);
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-xs) var(--spacing-md);
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-weight: 500;
            box-shadow: 0 2px 6px rgba(84, 115, 232, 0.2);
        }

        .full-btn:hover {
            background-color: var(--primary-dark);
            box-shadow: 0 4px 15px rgba(84, 115, 232, 0.3);
            transform: translateY(-2px);
        }

        .highlighted {
            color: var(--primary);
            font-weight: 600;
        }

        /* 鏃ュ巻鍜屽緟鍔炵殑瀹瑰櫒 */
        .calendar-notification-container {
            display: flex;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            flex-wrap: nowrap;
            height: 380px;
        }

        .calendar-section {
            flex: 6;
            min-width: 0;
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-md);
            height: 100%;
        }

        .notification-section {
            flex: 4;
            min-width: 0;
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-md);
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow-y: auto;
        }

        .notification-item {
            padding: var(--spacing-sm) 0;
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            border-bottom: 1px solid var(--border-light);
            transition: var(--transition);
            cursor: pointer;
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-item:hover {
            background-color: var(--bg-secondary);
            padding: var(--spacing-sm) var(--spacing-md);
            margin: 0 -var(--spacing-md);
            border-radius: var(--radius-sm);
        }

        .notification-badge {
            background-color: var(--primary-bg);
            color: var(--primary);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
            align-self: center;
            transition: var(--transition);
            min-width: 80px;
            text-align: center;
        }

        .notification-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
            min-width: 0;
        }

        .notification-text {
            color: var(--text-primary);
            font-size: 14px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-weight: 500;
        }

        .notification-deadline {
            font-size: 12px;
            color: var(--text-muted);
        }

        .help-tooltip {
            display: flex;
            align-items: center;
            margin-left: var(--spacing-sm);
            color: var(--text-secondary);
            cursor: help;
            position: relative;
        }

        .help-tooltip i {
            font-size: 16px;
        }

        .help-tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            font-size: 12px;
            white-space: nowrap;
            z-index: 10;
        }

        /* 蹇嵎鍏ュ彛閮ㄥ垎 */
        .shortcuts-section {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
        }

        .shortcuts-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .shortcut-card {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-sm);
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            height: 60px;
        }

        .shortcut-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            border-color: transparent;
        }

        .shortcut-card:nth-child(odd):hover {
            transform: translateY(-4px) rotate(1deg);
        }

        .shortcut-card:nth-child(even):hover {
            transform: translateY(-4px) rotate(-1deg);
        }

        .shortcut-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: var(--spacing-sm);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        .shortcut-icon i {
            font-size: 16px;
            color: white;
        }

        .shortcut-icon.blue {
            background: linear-gradient(135deg, #5473e8 0%, #3d5acd 100%);
        }

        .shortcut-icon.purple {
            background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);
        }

        .shortcut-icon.green {
            background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
        }

        .shortcut-icon.red {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
        }

        .shortcut-icon.blue-light {
            background: linear-gradient(135deg, #03a9f4 0%, #0288d1 100%);
        }

        .shortcut-icon.yellow {
            background: linear-gradient(135deg, #ffc107 0%, #ffa000 100%);
        }

        .shortcut-icon.cyan {
            background: linear-gradient(135deg, #00bcd4 0%, #0097a7 100%);
        }

        .shortcut-icon.orange {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
        }

        .shortcut-content {
            flex: 1;
        }

        .shortcut-title {
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
            color: var(--text-primary);
            font-size: 14px;
        }

        .shortcut-desc {
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* 鐢宠娴佺▼閮ㄥ垎 */
        .application-flow-section {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .flow-steps-container {
            position: relative;
            overflow-x: auto;
            padding: var(--spacing-md) 0;
            margin: 0 -16px;
        }

        .flow-steps {
            display: flex;
            align-items: center;
            min-width: max-content;
            padding: 0 16px;
        }

        .flow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            min-width: 100px;
            margin-right: var(--spacing-lg);
            z-index: 1;
        }

        .step-number {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--bg-secondary);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            font-size: 14px;
            z-index: 2;
            border: 2px solid var(--border-color);
            position: relative;
            transition: var(--transition);
        }

        .step-label {
            font-size: 13px;
            color: var(--text-secondary);
            text-align: center;
            max-width: 100px;
            transition: var(--transition);
        }

        .flow-step.active .step-number {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary-bg);
            box-shadow: 0 0 0 4px rgba(84, 115, 232, 0.2);
        }

        .flow-step.active .step-label {
            color: var(--primary);
            font-weight: 500;
        }

        .step-line {
            position: absolute;
            height: 2px;
            background-color: var(--border-color);
            width: calc(100% - 30px);
            left: calc(50% + 18px);
            top: 18px;
            z-index: 1;
        }

        .flow-step.active .step-line {
            background: linear-gradient(to right, var(--primary) 0%, var(--border-color) 100%);
        }

        /* AI椤鹃棶閮ㄥ垎 */
        .ai-advisor-section {
            background: linear-gradient(135deg, var(--primary-bg) 0%, #f9fbff 100%);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
        }

        .ai-advisor-section:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .ai-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 3px solid white;
        }

        .ai-avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .ai-greeting {
            flex: 1;
        }

        .ai-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: var(--spacing-xs);
        }

        .ai-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .ai-content {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .ai-input-container {
            position: relative;
        }

        .ai-input {
            width: 100%;
            padding: 12px 45px 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 14px;
            color: var(--text-primary);
            background-color: white;
            transition: var(--transition);
        }

        .ai-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(84, 115, 232, 0.1);
        }

        .ai-send-btn {
            position: absolute;
            right: var(--spacing-md);
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--primary);
            font-size: 18px;
            cursor: pointer;
            transition: var(--transition);
        }

        .ai-send-btn:hover {
            color: var(--primary-dark);
            transform: translateY(-50%) scale(1.1);
        }

        .ai-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .suggestion-chip {
            background-color: white;
            padding: 6px 12px;
            border-radius: var(--radius-md);
            font-size: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border-light);
        }

        .suggestion-chip:hover {
            background-color: var(--primary-bg);
            color: var(--primary);
            border-color: var(--primary-light);
        }

        .tool-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .tool-button {
            display: flex;
            align-items: center;
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            background-color: white;
            transition: var(--transition);
        }

        .tool-button i {
            margin-right: var(--spacing-sm);
            font-size: 14px;
        }

        .tool-button:hover {
            border-color: var(--primary-light);
            color: var(--primary);
            background-color: var(--primary-bg);
        }

        /* 鐭ヨ瘑搴撻儴鍒� */
        .knowledge-base-section {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-lg);
            flex: 1;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
        }

        .kb-header {
            flex-wrap: wrap;
            gap: var(--spacing-xs);
        }

        .kb-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: normal;
        }

        .kb-tabs {
            display: flex;
            gap: var(--spacing-sm);
            border-bottom: 1px solid var(--border-light);
            margin-bottom: var(--spacing-md);
            overflow-x: auto;
            padding-bottom: var(--spacing-sm);
        }

        .tab-btn {
            background: none;
            border: none;
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
            position: relative;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .tab-btn:hover {
            color: var(--primary);
        }

        .tab-btn.active {
            color: var(--primary);
            font-weight: 500;
            border-bottom-color: var(--primary);
        }

        .tab-btn.hot {
            color: var(--danger);
        }

        .badge {
            background-color: var(--danger);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 600;
        }

        .kb-list-item {
            display: flex;
            align-items: center;
            padding: var(--spacing-md) 0;
            border-bottom: 1px solid var(--border-light);
            cursor: pointer;
            transition: var(--transition);
        }

        .kb-list-item:last-child {
            border-bottom: none;
        }

        .kb-list-item:hover {
            background-color: var(--bg-secondary);
            padding-left: var(--spacing-md);
            padding-right: var(--spacing-md);
            margin: 0 -var(--spacing-md);
            border-radius: var(--radius-sm);
        }

        .kb-logo {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: var(--radius-sm);
            margin-right: var(--spacing-md);
            transition: var(--transition);
            border: 1px solid var(--border-light);
        }

        .kb-item-content {
            flex: 1;
            min-width: 0;
        }

        .kb-item-title {
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: var(--text-primary);
        }

        .kb-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .kb-item-date {
            font-size: 12px;
            color: var(--text-muted);
            margin-left: var(--spacing-md);
            white-space: nowrap;
        }

        /* 鑱婂ぉ鎶藉眽 */
        .chat-drawer {
            position: fixed;
            top: 0;
            right: -40%;
            width: 40%;
            height: 100vh;
            background-color: var(--bg-primary);
            box-shadow: var(--shadow-lg);
            transition: right 0.3s ease;
            z-index: 100;
            display: flex;
            flex-direction: column;
            border-radius: var(--radius-md) 0 0 var(--radius-md);
            overflow: hidden;
        }

        .chat-drawer.active {
            right: 0;
        }

        .drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--border-light);
            background-color: var(--primary-bg);
        }

        .drawer-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
        }

        .drawer-close {
            cursor: pointer;
            font-size: 24px;
            color: var(--text-secondary);
            background: none;
            border: none;
            padding: var(--spacing-xs);
            line-height: 1;
            transition: var(--transition);
        }

        .drawer-close:hover {
            color: var(--danger);
            transform: rotate(90deg);
        }

        .drawer-content {
            flex: 1;
            padding: var(--spacing-lg);
            overflow-y: auto;
        }

        .chat-message {
            display: flex;
            align-items: flex-start;
            margin-bottom: var(--spacing-xl);
            position: relative;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: var(--spacing-md);
            flex-shrink: 0;
            border: 2px solid var(--primary-bg);
        }

        .message-content {
            background-color: var(--primary-bg);
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius-md);
            max-width: 80%;
            position: relative;
            box-shadow: var(--shadow-sm);
        }

        .message-content::before {
            content: '';
            position: absolute;
            top: 15px;
            left: -8px;
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid var(--primary-bg);
        }

        .message-time {
            font-size: 12px;
            color: var(--text-muted);
            position: absolute;
            bottom: -20px;
            left: 54px;
            /* 头像宽度(40px) + 右边距(14px) */
        }

        /* 方案消息功能按钮样式 */
        .message-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px solid #eee;
        }

        .action-buttons-group {
            display: flex;
            gap: 12px;
        }

        .action-hint-text {
            font-size: 12px;
            color: #999;
            margin-left: auto;
        }

        .message-action-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: var(--bg-light);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .message-action-btn:hover {
            background-color: #e8edf5;
            transform: translateY(-2px);
        }

        .message-action-btn i {
            font-size: 14px;
            color: #666;
        }

        .message-action-btn.active {
            background-color: var(--primary-light);
        }

        .message-action-btn.active i {
            color: var(--primary);
        }

        .like-btn.active i {
            color: #4caf50;
        }

        .dislike-btn.active i {
            color: #f44336;
        }

        /* Toast消息样式 */
        .toast-message {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background-color: rgba(51, 51, 51, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 9999;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast-message.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .chat-input-area {
            padding: var(--spacing-md) var(--spacing-lg);
            border-top: 1px solid var(--border-light);
            background-color: var(--bg-primary);
            position: relative;
        }

        .chat-input {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-md);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 14px;
            resize: none;
            min-height: 40px;
            max-height: 120px;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            transition: var(--transition);
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(84, 115, 232, 0.1);
        }

        .chat-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--spacing-md);
        }

        .chat-tools {
            display: flex;
            gap: var(--spacing-md);
        }

        .chat-send-container {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .word-count {
            color: var(--text-muted);
            font-size: 12px;
        }

        .send-button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .send-button:hover {
            background-color: var(--primary-dark);
            transform: scale(1.1);
        }

        .send-button i {
            font-size: 16px;
        }

        .bottom-tools {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            background-color: var(--bg-secondary);
            border-radius: var(--radius-md);
            margin-top: var(--spacing-md);
        }

        .bottom-tool-button {
            display: flex;
            align-items: center;
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            background-color: var(--bg-primary);
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .bottom-tool-button i {
            margin-right: var(--spacing-xs);
            font-size: 13px;
        }

        .bottom-tool-button:hover {
            background-color: var(--primary-bg);
            color: var(--primary);
            border-color: var(--primary-light);
        }

        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(3px);
            z-index: 99;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .drawer-overlay.active {
            display: block;
            opacity: 1;
        }

        /* 濯掍綋鏌ヨ */
        @media (max-width: 1200px) {
            .shortcuts-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .content-area {
                flex: 6;
            }

            .knowledge-base-area {
                flex: 4;
                max-width: 350px;
            }
        }

        @media (max-width: 992px) {
            .content-and-knowledge-base {
                flex-direction: column;
            }

            .knowledge-base-area {
                width: 100%;
                max-width: none;
                margin-top: var(--spacing-md);
            }

            .content-area {
                max-width: 100%;
            }

            .shortcuts-container {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }

            .calendar-notification-container {
                flex-direction: column;
            }

            .calendar-section,
            .notification-section {
                flex: 1;
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
            }

            .logo-text,
            .nav-item span,
            .vip-section .vip-label,
            .vip-section .vip-info,
            .vip-button,
            .feedback-button span,
            .bottom-nav span {
                display: none;
            }

            .main-content-wrapper {
                max-width: calc(100% - 60px);
            }

            .shortcuts-container {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
        }

        @media (max-width: 576px) {
            .shortcuts-container {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .header-user span {
                display: none;
            }

            .greeting {
                flex-direction: column;
                align-items: flex-start;
            }

            .task-count {
                margin-top: var(--spacing-sm);
            }

            .header-left {
                display: none;
            }
        }

        /* 推荐方案卡片样式 */
        .recommendation-cards {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 10px;
            width: 100%;
        }

        .recommendation-advantages {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .advantage-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            background-color: #f5f7fa;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .advantage-item i {
            color: #4caf50;
            font-size: 18px;
            margin-top: 2px;
        }

        .school-cards {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .school-card {
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            background-color: #f9fafd;
            position: relative;
            padding-left: 20px;
            /* 为序号图标留出空间 */
        }

        .school-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        .school-header {
            padding: 16px;
            background-color: #f7f9fc;
            border-bottom: 1px solid #e0e0e0;
            position: relative;
        }

        .school-name-container {
            display: flex;
            align-items: center;
            margin-left: 20px;
            /* 避免与序号图标重叠 */
            margin-bottom: 4px;
        }

        .school-name {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .star-rating-container {
            flex-shrink: 0;
            margin-left: 12px;
        }

        .star-rating-label {
            font-size: 12px;
            color: #777;
            text-align: right;
            margin-bottom: 2px;
        }

        .star-rating {
            display: flex;
            gap: 2px;
            justify-content: flex-end;
        }

        .star-rating i {
            color: #ffc107;
            font-size: 14px;
        }

        .star-rating i.empty {
            color: #e0e0e0;
        }

        .program-name {
            font-size: 15px;
            color: #555;
            margin-bottom: 10px;
            padding-right: 30px;
        }

        .tag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .school-type {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .school-type.challenge {
            background-color: #ffebee;
            color: #e53935;
        }

        .school-type.safe {
            background-color: #e8f5e9;
            color: #43a047;
        }

        .qs-ranking {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            background-color: #e3f2fd;
            color: #1976d2;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .feature-tag {
            display: inline-block;
            padding: 4px 10px;
            background-color: #f0f4c3;
            color: #827717;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .school-content {
            padding: 16px;
            position: relative;
        }

        .program-intro {
            font-size: 14px;
            line-height: 1.5;
            color: #555;
            margin-bottom: 16px;
        }

        .school-details {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 16px;
        }

        .school-detail-item {
            flex: 1;
            min-width: 120px;
        }

        .detail-label {
            font-size: 12px;
            color: #777;
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 15px;
            font-weight: 500;
            color: #333;
        }

        .star-rating {
            display: flex;
            gap: 2px;
        }

        .star-rating i {
            color: #ffc107;
            font-size: 16px;
        }

        .star-rating i.empty {
            color: #e0e0e0;
        }

        .program-suggestion {
            font-size: 14px;
            line-height: 1.5;
            color: #555;
            padding: 12px;
            background-color: #fff8e1;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        /* 修改下拉按钮位置到右下角 */
        .toggle-details-btn {
            position: absolute;
            right: 12px;
            bottom: 12px;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 18px;
            padding: 4px;
            transition: all 0.3s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .toggle-details-btn:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--primary);
        }

        .toggle-details-btn i {
            transition: transform 0.3s ease;
        }

        .school-card.expanded .toggle-details-btn i {
            transform: rotate(180deg);
        }

        .expanded-details {
            display: none;
            padding: 16px;
            background-color: #f3f5fa;
            border-top: 1px dashed #e0e0e0;
            position: relative;
        }

        .school-card.expanded .expanded-details {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .details-section {
            margin-top: 16px;
        }

        .details-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .details-flex {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .detail-chip {
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 500;
            font-size: 13px;
            display: inline-block;
        }

        .duration-chip {
            background-color: #e0f7fa;
            color: #00838f;
        }

        .tuition-chip {
            background-color: #f9fbe7;
            color: #9e9d24;
        }

        .details-row {
            display: flex;
            flex-direction: column;
            margin-bottom: 12px;
        }

        .details-label {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
        }

        .details-value {
            font-size: 14px;
            color: #333;
        }

        /* 修改详情页链接样式和位置 */
        .details-link {
            display: inline-block;
            color: var(--primary);
            text-decoration: none;
            font-size: 13px;
            padding: 6px 12px;
            background-color: var(--primary-bg);
            border-radius: 6px;
            transition: all 0.3s ease;
            position: absolute;
            top: 12px;
            right: 12px;
        }

        .details-link:hover {
            background-color: var(--primary-light);
            color: white;
        }

        @media (max-width: 768px) {
            .school-details {
                flex-direction: column;
                gap: 12px;
            }

            .details-flex {
                flex-direction: column;
            }

            .details-link {
                position: static;
                margin-top: 16px;
                display: block;
                text-align: center;
            }
        }

        /* 序号图标样式 - 调整到左上角 */
        .scheme-number {
            position: absolute;
            top: -8px;
            left: -8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }

        /* 鏃ュ巻鍖哄煙鏍峰紡 */
        .calendar-section {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-sm);
            flex: 1;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            height: 100%;
        }

        .calendar-navigation {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        .month-navigation {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .nav-button {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 14px;
            cursor: pointer;
            padding: var(--spacing-xs);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .nav-button:hover {
            background-color: var(--bg-secondary);
            color: var(--primary);
        }

        .month-navigation span {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .today-button {
            color: var(--primary);
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: var(--transition);
            border: 1px solid var(--primary-light);
            padding: 4px 10px;
            border-radius: var(--radius-sm);
            background-color: var(--primary-bg);
        }

        .today-button:hover {
            background-color: var(--primary);
            color: white;
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            margin: var(--spacing-sm) 0 var(--spacing-xs);
        }

        .weekdays div {
            padding: var(--spacing-xs) 0;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            flex: 1;
        }

        .day {
            display: flex;
            align-items: center;
            justify-content: center;
            aspect-ratio: 1;
            border-radius: var(--radius-md);
            cursor: pointer;
            position: relative;
            font-size: 12px;
            transition: var(--transition);
            color: var(--text-primary);
            border: 1px solid transparent;
        }

        .day:hover {
            background-color: var(--bg-secondary);
            border-color: var(--primary-light);
        }

        .day.prev-month,
        .day.next-month {
            color: var(--text-muted);
            opacity: 0.6;
        }

        .day.current {
            background-color: var(--primary);
            color: white;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(84, 115, 232, 0.3);
        }

        .day.has-event {
            border-color: var(--primary-light);
            font-weight: 500;
        }

        .day.has-event::after {
            content: '';
            position: absolute;
            bottom: 4px;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: var(--primary);
        }

        .calendar-hint {
            margin-top: var(--spacing-md);
            display: flex;
            justify-content: flex-end;
        }

        .hint-item {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .hint-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--primary);
            margin-right: var(--spacing-xs);
        }

        .hint-text {
            font-size: 12px;
        }

        /* 2D杞崲鍔ㄧ敾 */
        .calendar-section:hover .day {
            transform: translateY(0);
        }

        .calendar-section:hover .day:nth-child(3n) {
            animation: hover-pulse 1.5s infinite;
        }

        .calendar-section:hover .day:nth-child(3n+1) {
            animation: hover-pulse 1.5s 0.5s infinite;
        }

        .calendar-section:hover .day:nth-child(3n+2) {
            animation: hover-pulse 1.5s 1s infinite;
        }

        @keyframes hover-pulse {
            0% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-2px);
            }

            100% {
                transform: translateY(0);
            }
        }

        /* 鍝嶅簲寮忚皟鏁 */
        @media (max-width: 1200px) {
            .days {
                gap: 2px;
            }

            .day {
                font-size: 11px;
            }
        }

        @media (max-width: 992px) {
            .calendar-section {
                margin-bottom: var(--spacing-md);
            }
        }

        @media (max-width: 576px) {
            .calendar-navigation {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-sm);
            }
        }
    </style>
</head>

<body>
    <div class="page-container">
        <!-- 左侧导航栏 -->
        <div class="sidebar">
            <div class="logo-area">
                <span class="logo-text">小希顾问 Pro</span>
            </div>

            <div class="nav-menu">
                <div class="nav-item active">
                    <i class="bi bi-grid"></i>
                    <span>工作台</span>
                </div>
                <div class="nav-item with-submenu">
                    <div class="nav-item-main">
                        <i class="bi bi-mortarboard"></i>
                        <span>我的学生</span>
                        <i class="bi bi-chevron-down toggle-icon"></i>
                    </div>
                    <div class="submenu">
                        <div class="submenu-item">学生列表</div>
                        <div class="submenu-item">申请列表</div>
                    </div>
                </div>
                <div class="nav-item">
                    <i class="bi bi-megaphone"></i>
                    <span>资源促客</span>
                </div>
                <div class="nav-item">
                    <i class="bi bi-file-earmark-text"></i>
                    <span>资源方案</span>
                </div>
                <div class="nav-item">
                    <i class="bi bi-chat-dots"></i>
                    <span>语言测评</span>
                </div>
                <div class="nav-item with-submenu">
                    <div class="nav-item-main">
                        <i class="bi bi-wallet2"></i>
                        <span>佣金管理</span>
                        <i class="bi bi-chevron-down toggle-icon"></i>
                    </div>
                </div>
                <div class="nav-item with-submenu">
                    <div class="nav-item-main">
                        <i class="bi bi-gear"></i>
                        <span>设置</span>
                        <i class="bi bi-chevron-down toggle-icon"></i>
                    </div>
                </div>
            </div>

            <div class="vip-section">
                <div class="vip-label">澳英多所</div>
                <div class="vip-info">院校高佣金</div>
                <div class="vip-button">
                    <button class="btn-challenge">挑战任务</button>
                </div>
                <div class="feedback-button">
                    <i class="bi bi-envelope"></i>
                    <span>一键投诉</span>
                </div>
            </div>

            <div class="bottom-nav">
                <i class="bi bi-list"></i>
                <span>收起导航</span>
            </div>
        </div>

        <!-- 主要内容区域 -->
        <div class="main-content-wrapper">
            <!-- 顶部导航栏 -->
            <div class="top-header">
                <div class="header-left">
                    <div class="breadcrumbs">
                        <span class="breadcrumb-item">工作台</span>
                        <i class="bi bi-chevron-right"></i>
                        <span class="breadcrumb-item active">首页</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-icon">
                        <i class="bi bi-search"></i>
                    </div>
                    <div class="header-icon notification-icon">
                        <i class="bi bi-bell-fill"></i>
                        <span class="notification-badge">99+</span>
                    </div>
                    <div class="header-icon ai-icon">
                        <span>小希</span>
                    </div>
                    <div class="header-user">
                        <img src="assets/avatar.png" alt="用户头像" class="user-avatar-small">
                        <span>党颖</span>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                </div>
            </div>

            <!-- 主内容区 和 右侧知识库区 -->
            <div class="content-and-knowledge-base">
                <!-- 中间内容区域 -->
                <div class="content-area">
                    <div class="greeting-section">
                        <div class="greeting">
                            <div class="greeting-text-container">
                                <span class="greeting-icon">👋</span>
                                <span class="greeting-text">Hi 下午好，党颖</span>
                            </div>
                            <span class="task-count">您共有 <span class="highlighted">20</span> 条待办事项</span>
                        </div>
                        <div class="action-buttons">
                            <button class="full-btn">查看全部 <i class="bi bi-arrow-right"></i></button>
                        </div>
                    </div>

                    <!-- 日历和待办事项容器 -->
                    <div class="calendar-notification-container">
                        <!-- 日历部分 -->
                        <div class="calendar-section">
                            <div class="section-header">
                                <h2 class="section-title">日程事项</h2>
                                <div class="calendar-navigation">
                                    <div class="month-navigation">
                                        <button class="nav-button"><i class="bi bi-chevron-left"></i></button>
                                        <span>2025-04</span>
                                        <button class="nav-button"><i class="bi bi-chevron-right"></i></button>
                                    </div>
                                    <div class="today-button">今天</div>
                                </div>
                            </div>
                            <div class="calendar">
                                <div class="weekdays">
                                    <div>一</div>
                                    <div>二</div>
                                    <div>三</div>
                                    <div>四</div>
                                    <div>五</div>
                                    <div>六</div>
                                    <div>日</div>
                                </div>
                                <div class="days">
                                    <div class="day prev-month">31</div>
                                    <div class="day">1</div>
                                    <div class="day">2</div>
                                    <div class="day has-event">3</div>
                                    <div class="day">4</div>
                                    <div class="day has-event">5</div>
                                    <div class="day">6</div>
                                    <div class="day">7</div>
                                    <div class="day">8</div>
                                    <div class="day">9</div>
                                    <div class="day">10</div>
                                    <div class="day has-event">11</div>
                                    <div class="day">12</div>
                                    <div class="day">13</div>
                                    <div class="day">14</div>
                                    <div class="day">15</div>
                                    <div class="day">16</div>
                                    <div class="day current">17</div>
                                    <div class="day">18</div>
                                    <div class="day">19</div>
                                    <div class="day">20</div>
                                    <div class="day">21</div>
                                    <div class="day has-event">22</div>
                                    <div class="day">23</div>
                                    <div class="day">24</div>
                                    <div class="day">25</div>
                                    <div class="day">26</div>
                                    <div class="day has-event">27</div>
                                    <div class="day">28</div>
                                    <div class="day">29</div>
                                    <div class="day">30</div>
                                    <div class="day next-month">1</div>
                                    <div class="day next-month">2</div>
                                    <div class="day next-month">3</div>
                                    <div class="day next-month">4</div>
                                    <div class="day next-month">5</div>
                                    <div class="day next-month">6</div>
                                    <div class="day next-month">7</div>
                                    <div class="day next-month">8</div>
                                    <div class="day next-month">9</div>
                                    <div class="day next-month">10</div>
                                    <div class="day next-month">11</div>
                                </div>
                            </div>
                            <div class="calendar-hint">
                                <div class="hint-item">
                                    <span class="hint-dot"></span>
                                    <span class="hint-text">事项提示</span>
                                </div>
                            </div>
                        </div>

                        <!-- 通知事项 -->
                        <div class="notification-section">
                            <div class="section-header">
                                <h2 class="section-title">待办事项</h2>
                                <button class="link-btn">查看全部 <i class="bi bi-arrow-right"></i></button>
                            </div>
                            <div class="notification-item">
                                <div class="notification-badge">【登证申请资料】</div>
                                <div class="notification-content">
                                    <div class="notification-text">dw测试学生2 新西兰 奥克兰大学 申请条件核查</div>
                                    <div class="notification-deadline">截止：04月30日</div>
                                </div>
                            </div>
                            <div class="notification-item">
                                <div class="notification-badge">【免申请费活动】</div>
                                <div class="notification-content">
                                    <div class="notification-text">张三 澳大利亚 免申请费活动退回待处理</div>
                                    <div class="notification-deadline">截止：05月05日</div>
                                </div>
                            </div>
                            <div class="notification-item">
                                <div class="notification-badge">【申请资料】</div>
                                <div class="notification-content">
                                    <div class="notification-text">小希 新西兰,澳大利亚 申请资料退回待处理</div>
                                    <div class="notification-deadline">截止：05月10日</div>
                                </div>
                            </div>
                            <div class="notification-item">
                                <div class="notification-badge">【机构信息补充】</div>
                                <div class="notification-content">
                                    <div class="notification-text">您好，您的机构有部分学校信息需要补充，为避免对您的学生业务造成影响...</div>
                                    <div class="notification-deadline">截止：04月25日</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 快捷入口部分 -->
                    <div class="shortcuts-section">
                        <div class="section-header">
                            <h2 class="section-title">快捷入口</h2>
                        </div>
                        <div class="shortcuts-container">
                            <div class="shortcut-card">
                                <div class="shortcut-icon blue">
                                    <i class="bi bi-people"></i>
                                </div>
                                <div class="shortcut-content">
                                    <div class="shortcut-title">添加学生</div>
                                    <div class="shortcut-desc">添加留学申请学生</div>
                                </div>
                            </div>
                            <div class="shortcut-card">
                                <div class="shortcut-icon purple">
                                    <i class="bi bi-file-earmark-text"></i>
                                </div>
                                <div class="shortcut-content">
                                    <div class="shortcut-title">方案制作</div>
                                    <div class="shortcut-desc">智能规划留学方案</div>
                                </div>
                            </div>
                            <div class="shortcut-card">
                                <div class="shortcut-icon blue-light">
                                    <i class="bi bi-mortarboard"></i>
                                </div>
                                <div class="shortcut-content">
                                    <div class="shortcut-title">我的学生</div>
                                    <div class="shortcut-desc">高效管理学生资源</div>
                                </div>
                            </div>
                            <div class="shortcut-card">
                                <div class="shortcut-icon yellow">
                                    <i class="bi bi-pencil-square"></i>
                                </div>
                                <div class="shortcut-content">
                                    <div class="shortcut-title">语言测评</div>
                                    <div class="shortcut-desc">拓展生源助力转化</div>
                                </div>
                            </div>
                            <div class="shortcut-card">
                                <div class="shortcut-icon green">
                                    <i class="bi bi-book"></i>
                                </div>
                                <div class="shortcut-content">
                                    <div class="shortcut-title">知识库</div>
                                    <div class="shortcut-desc">留学知识库在此</div>
                                </div>
                            </div>
                            <div class="shortcut-card">
                                <div class="shortcut-icon red">
                                    <i class="bi bi-heart"></i>
                                </div>
                                <div class="shortcut-content">
                                    <div class="shortcut-title">热门活动</div>
                                    <div class="shortcut-desc">院校活动助力签约</div>
                                </div>
                            </div>
                            <div class="shortcut-card">
                                <div class="shortcut-icon cyan">
                                    <i class="bi bi-receipt"></i>
                                </div>
                                <div class="shortcut-content">
                                    <div class="shortcut-title">offer接受缴费</div>
                                    <div class="shortcut-desc">便捷留学缴费通道</div>
                                </div>
                            </div>
                            <div class="shortcut-card">
                                <div class="shortcut-icon orange">
                                    <i class="bi bi-cash-coin"></i>
                                </div>
                                <div class="shortcut-content">
                                    <div class="shortcut-title">佣金收益表</div>
                                    <div class="shortcut-desc">查看送生佣金收益</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 申请流程部分 -->
                    <div class="application-flow-section">
                        <div class="section-header">
                            <h2 class="section-title">申请流程</h2>
                            <div class="help-tooltip" data-tooltip="申请全流程指南">
                                <i class="bi bi-question-circle"></i>
                            </div>
                        </div>
                        <div class="flow-steps-container">
                            <div class="flow-steps">
                                <div class="flow-step active">
                                    <div class="step-number">1</div>
                                    <div class="step-line"></div>
                                    <div class="step-label">个人信息</div>
                                </div>
                                <div class="flow-step active">
                                    <div class="step-number">2</div>
                                    <div class="step-line"></div>
                                    <div class="step-label">学术背景</div>
                                </div>
                                <div class="flow-step active">
                                    <div class="step-number">3</div>
                                    <div class="step-line"></div>
                                    <div class="step-label">3个工作日完成</div>
                                </div>
                                <div class="flow-step active">
                                    <div class="step-number">4</div>
                                    <div class="step-line"></div>
                                    <div class="step-label">4-6周完成</div>
                                </div>
                                <div class="flow-step active">
                                    <div class="step-number">5</div>
                                    <div class="step-line"></div>
                                    <div class="step-label">申请确认</div>
                                </div>
                                <div class="flow-step">
                                    <div class="step-number">6</div>
                                    <div class="step-line"></div>
                                    <div class="step-label">2个工作日完成</div>
                                </div>
                                <div class="flow-step">
                                    <div class="step-number">7</div>
                                    <div class="step-line"></div>
                                    <div class="step-label">4-6周完成</div>
                                </div>
                                <div class="flow-step">
                                    <div class="step-number">8</div>
                                    <div class="step-label">录取确认</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右侧知识库区域 -->
                <div class="knowledge-base-area">
                    <!-- AI顾问部分 -->
                    <div class="ai-advisor-section">
                        <div class="ai-header">
                            <div class="ai-avatar">
                                <img src="https://images.unsplash.com/photo-1531746790731-6c087fecd65a?q=80&w=1000&auto=format&fit=crop"
                                    alt="AI Assistant" class="ai-avatar-img">
                            </div>
                            <div class="ai-greeting">
                                <h3 class="ai-title">小希留学顾问</h3>
                                <p class="ai-subtitle">留学专属大模型，聚集资深顾问服务经验！</p>
                            </div>
                        </div>

                        <div class="ai-content">
                            <div class="ai-input-container">
                                <input type="text" class="ai-input" placeholder="有什么留学问题，都来问我吧~">
                                <button class="ai-send-btn">
                                    <i class="bi bi-send-fill"></i>
                                </button>
                            </div>

                            <div class="ai-suggestions">
                                <div class="suggestion-chip">如何申请美国顶尖大学?</div>
                                <div class="suggestion-chip">留学费用大概多少?</div>
                                <div class="suggestion-chip">雅思和托福有什么区别?</div>
                            </div>

                            <div class="tool-buttons">
                                <button class="tool-button">
                                    <i class="bi bi-robot"></i>
                                    DeepSeek R1
                                </button>
                                <button class="tool-button">
                                    <i class="bi bi-building"></i>
                                    院校库
                                </button>
                                <button class="tool-button">
                                    <i class="bi bi-book"></i>
                                    知识库
                                </button>
                                <button class="tool-button">
                                    <i class="bi bi-file-earmark-text"></i>
                                    留学方案
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 知识库 -->
                    <div class="knowledge-base-section">
                        <div class="section-header kb-header">
                            <h2 class="section-title">知识库</h2>
                            <span class="kb-subtitle">留学的一切问题, 知识库给你答案!</span>
                            <button class="link-btn">查看全部 <i class="bi bi-arrow-right"></i></button>
                        </div>

                        <div class="kb-tabs">
                            <button class="tab-btn active">院校通知</button>
                            <button class="tab-btn">常见问题</button>
                            <button class="tab-btn">文件分享</button>
                            <button class="tab-btn">精选案例</button>
                            <button class="tab-btn hot">
                                最近新增
                                <span class="badge">1</span>
                            </button>
                        </div>

                        <div class="kb-content">
                            <div class="kb-list">
                                <div class="kb-list-item">
                                    <img src="https://images.unsplash.com/photo-1562774053-701939374585?q=80&w=1000&auto=format&fit=crop"
                                        alt="MIT Logo" class="kb-logo">
                                    <div class="kb-item-content">
                                        <div class="kb-item-title">测试案例5</div>
                                        <div class="kb-item-desc">UWA TIME线下沙龙 | 2025首站与你相约北京原创 UWA UWA西澳 2025年03月31日
                                            13:00...</div>
                                    </div>
                                    <div class="kb-item-date">04/10</div>
                                </div>
                                <div class="kb-list-item">
                                    <img src="https://images.unsplash.com/photo-1523050854058-8df90110c9f1?q=80&w=1000&auto=format&fit=crop"
                                        alt="University Logo" class="kb-logo">
                                    <div class="kb-item-content">
                                        <div class="kb-item-title">测试案例7</div>
                                        <div class="kb-item-desc">澳洲八大名校申请须知与最新政策解析，助你规划留学之路</div>
                                    </div>
                                    <div class="kb-item-date">04/10</div>
                                </div>
                                <div class="kb-list-item">
                                    <img src="https://images.unsplash.com/photo-1546410531-bb4caa6b424d?q=80&w=1000&auto=format&fit=crop"
                                        alt="University Logo" class="kb-logo">
                                    <div class="kb-item-content">
                                        <div class="kb-item-title">测试案例6</div>
                                        <div class="kb-item-desc">英国大学申请截止日期与材料准备全指南</div>
                                    </div>
                                    <div class="kb-item-date">04/10</div>
                                </div>
                                <div class="kb-list-item">
                                    <img src="https://images.unsplash.com/photo-1592280771190-3e2e4d571952?q=80&w=1000&auto=format&fit=crop"
                                        alt="University Logo" class="kb-logo">
                                    <div class="kb-item-content">
                                        <div class="kb-item-title">测试案例3</div>
                                        <div class="kb-item-desc">美国顶尖商学院申请条件与准备流程详解</div>
                                    </div>
                                    <div class="kb-item-date">04/10</div>
                                </div>
                                <div class="kb-list-item">
                                    <img src="https://images.unsplash.com/photo-1606761568499-6d2451b23c66?q=80&w=1000&auto=format&fit=crop"
                                        alt="University Logo" class="kb-logo">
                                    <div class="kb-item-content">
                                        <div class="kb-item-title">测试案例2</div>
                                        <div class="kb-item-desc">加拿大留学签证申请流程与注意事项</div>
                                    </div>
                                    <div class="kb-item-date">04/10</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 聊天抽屉 -->
    <div class="drawer-overlay"></div>
    <div class="chat-drawer">
        <div class="drawer-header">
            <div class="drawer-title">小希留学顾问-更懂你的留学问题</div>
            <button class="drawer-close">×</button>
        </div>
        <div class="drawer-content">
            <div class="chat-message">
                <img src="https://images.unsplash.com/photo-1531746790731-6c087fecd65a?q=80&w=1000&auto=format&fit=crop"
                    alt="AI" class="chat-avatar">
                <div class="message-content">
                    <div>👋 嗨！我是小希留学顾问，随时为您解答选校、申请、材料准备等留学问题。</div>
                    <div style="margin-top: 8px;">您还可以选择不同的模型 —— DeepSeek R1、院校库、知识库、留学方案，精确解决您的需求。</div>
                    <div style="margin-top: 8px;">有问题，尽管问我吧！</div>
                    <div class="message-time">09:26</div>
                </div>
            </div>
        </div>
        <div class="chat-input-area">
            <textarea class="chat-input" placeholder="请输入您的问题，按Enter发送..." rows="1"></textarea>
            <div class="chat-toolbar">
                <div class="chat-tools">
                    <!-- 移除图片、文件和表情按钮 -->
                </div>
                <div class="chat-send-container">
                    <span class="word-count">0/2000</span>
                    <button class="send-button">
                        <i class="bi bi-send-fill" title="发送"></i>
                    </button>
                </div>
            </div>
            <div class="bottom-tools">
                <button class="bottom-tool-button">
                    <i class="bi bi-file-earmark-text"></i>
                    方案制作
                </button>
                <button class="bottom-tool-button">
                    <i class="bi bi-robot"></i>
                    DeepSeek R1
                </button>
                <button class="bottom-tool-button">
                    <i class="bi bi-building"></i>
                    院校库
                </button>
                <button class="bottom-tool-button">
                    <i class="bi bi-book"></i>
                    知识库
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 直接展开聊天抽屉
            const chatDrawer = document.querySelector('.chat-drawer');
            const drawerOverlay = document.querySelector('.drawer-overlay');
            if (chatDrawer && drawerOverlay) {
                chatDrawer.classList.add('active');
                drawerOverlay.classList.add('active');
            }
            // 初始化其他功能
            initializeNavMenu();
            initializeKnowledgeBase();
            initializeCalendar();
            initializeChatDrawer();
            // 聊天相关功能初始化
            initializeChatFeatures();
        });

        // 显示提示消息
        function showToast(message, duration = 2000) {
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('show');
            }, 10);

            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, duration);
        }

        // 初始化导航菜单
        function initializeNavMenu() {
            const menuItems = document.querySelectorAll('.sidebar .with-submenu');
            menuItems.forEach(item => {
                const mainItem = item.querySelector('.nav-item-main');
                const submenu = item.querySelector('.submenu');
                const toggleIcon = item.querySelector('.toggle-icon');

                if (mainItem && submenu && toggleIcon) {
                    mainItem.addEventListener('click', function () {
                        const isExpanded = submenu.style.display === 'block';
                        submenu.style.display = isExpanded ? 'none' : 'block';
                        toggleIcon.classList.toggle('bi-chevron-up', !isExpanded);
                        toggleIcon.classList.toggle('bi-chevron-down', isExpanded);
                    });
                }
            });
        }

        // 初始化知识库
        function initializeKnowledgeBase() {
            const tabButtons = document.querySelectorAll('.kb-tabs .tab-btn');
            const kbContent = document.querySelector('.kb-content');

            if (tabButtons.length > 0 && kbContent) {
                tabButtons.forEach(button => {
                    button.addEventListener('click', function () {
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        console.log('切换到选项卡:', this.textContent);
                    });
                });
            }
        }

        // 初始化日历
        function initializeCalendar() {
            const prevMonthBtn = document.querySelector('.month-navigation .bi-chevron-left');
            const nextMonthBtn = document.querySelector('.month-navigation .bi-chevron-right');
            const monthDisplay = document.querySelector('.month-navigation span');
            const todayBtn = document.querySelector('.today-button');
            const days = document.querySelectorAll('.calendar .day');

            if (prevMonthBtn && nextMonthBtn && monthDisplay && todayBtn) {
                let currentDate = new Date(2025, 3, 17);

                function updateCalendarDisplay() {
                    const year = currentDate.getFullYear();
                    const month = currentDate.getMonth() + 1;
                    monthDisplay.textContent = `${year}-${String(month).padStart(2, '0')}`;
                }

                // 添加日期点击事件
                days.forEach(day => {
                    day.addEventListener('click', function () {
                        days.forEach(d => d.classList.remove('current'));
                        this.classList.add('current');
                    });
                });

                todayBtn.addEventListener('click', function () {
                    currentDate = new Date(2025, 3, 17); // 固定为演示的当前日期
                    updateCalendarDisplay();

                    // 高亮今天
                    days.forEach(day => {
                        if (day.textContent === '17' && !day.classList.contains('prev-month') && !day.classList.contains('next-month')) {
                            days.forEach(d => d.classList.remove('current'));
                            day.classList.add('current');
                        }
                    });
                });

                prevMonthBtn.addEventListener('click', function () {
                    currentDate.setMonth(currentDate.getMonth() - 1);
                    updateCalendarDisplay();
                });

                nextMonthBtn.addEventListener('click', function () {
                    currentDate.setMonth(currentDate.getMonth() + 1);
                    updateCalendarDisplay();
                });

                updateCalendarDisplay();
            }
        }

        // 初始化聊天抽屉基本功能
        function initializeChatDrawer() {
            const aiAdvisorSection = document.querySelector('.ai-advisor-section');
            const aiIcon = document.querySelector('.ai-icon');
            const chatDrawer = document.querySelector('.chat-drawer');
            const drawerOverlay = document.querySelector('.drawer-overlay');
            const drawerClose = document.querySelector('.drawer-close');
            const drawerInput = document.querySelector('.chat-input');

            // 打开聊天抽屉
            function openChatDrawer() {
                if (chatDrawer && drawerOverlay) {
                    chatDrawer.classList.add('active');
                    drawerOverlay.classList.add('active');
                    if (drawerInput) setTimeout(() => drawerInput.focus(), 300);
                }
            }

            // 关闭聊天抽屉
            function closeChatDrawer(e) {
                if (e) e.stopPropagation();
                if (chatDrawer && drawerOverlay) {
                    chatDrawer.classList.remove('active');
                    drawerOverlay.classList.remove('active');
                }
            }

            // 点击AI顾问区域打开抽屉
            if (aiAdvisorSection) {
                aiAdvisorSection.addEventListener('click', openChatDrawer);
            }

            // 点击AI图标打开抽屉
            if (aiIcon) {
                aiIcon.addEventListener('click', openChatDrawer);
            }

            // 点击关闭按钮关闭抽屉
            if (drawerClose) {
                drawerClose.addEventListener('click', closeChatDrawer);
            }

            // 点击遮罩层关闭抽屉
            if (drawerOverlay) {
                drawerOverlay.addEventListener('click', closeChatDrawer);
            }

            // 阻止抽屉内部点击事件冒泡
            if (chatDrawer) {
                chatDrawer.addEventListener('click', function (e) {
                    e.stopPropagation();
                });
            }
        }

        // 初始化聊天和推荐功能
        function initializeChatFeatures() {
            // 聊天相关元素
            const aiInput = document.querySelector('.ai-input');
            const aiSendBtn = document.querySelector('.ai-send-btn');
            const chatInput = document.querySelector('.chat-input');
            const sendButton = document.querySelector('.send-button');
            const chatContent = document.querySelector('.drawer-content');
            const suggestionChips = document.querySelectorAll('.suggestion-chip');
            const bottomToolButtons = document.querySelectorAll('.bottom-tool-button');

            // 初始化JSON数据
            let jsonData = null;

            // 加载JSON数据 - 使用绝对路径
            loadJsonData();

            function loadJsonData() {
                // 尝试多种可能的路径
                const possiblePaths = ['test.json', '/test.json', 'V2/test.json', '/V2/test.json'];

                function tryNextPath(index) {
                    if (index >= possiblePaths.length) {
                        console.error('无法加载JSON数据，已尝试所有可能的路径');
                        return;
                    }

                    fetch(possiblePaths[index])
                        .then(response => {
                            if (!response.ok) throw new Error('网络响应不正常');
                            return response.json();
                        })
                        .then(data => {
                            jsonData = data;
                            console.log('JSON数据加载成功，路径:', possiblePaths[index]);
                        })
                        .catch(error => {
                            console.warn(`加载JSON数据失败(${possiblePaths[index]}):`, error);
                            tryNextPath(index + 1);
                        });
                }

                tryNextPath(0);
            }

            // 显示推荐方案
            function displayRecommendation(data) {
                console.log('正在显示推荐方案:', data);

                const messageDiv = document.createElement('div');
                messageDiv.className = 'chat-message';

                let recommendationHTML = `
            <img src="https://images.unsplash.com/photo-1531746790731-6c087fecd65a?q=80&w=1000&auto=format&fit=crop" alt="AI" class="chat-avatar">
            <div class="message-content" style="max-width: 90%;">
                <div>
                    <div class="recommendation-cards">
                        <div class="recommendation-advantages">
        `;

                // 添加优势分析
                if (data.recommend) {
                    Object.keys(data.recommend).forEach(key => {
                        let label;
                        switch (key) {
                            case 'Advantages':
                                label = '优势分析';
                                break;
                            case 'Lifting_Point':
                                label = '提升点';
                                break;
                            case 'Points':
                                label = '推荐依据';
                                break;
                            default:
                                label = key;
                        }

                        recommendationHTML += `
                    <div class="advantage-item">
                        <i class="bi bi-check-circle-fill"></i>
                        <div>
                            <strong>${label}：</strong>${data.recommend[key]}
                        </div>
                    </div>
                `;
                    });
                }

                recommendationHTML += `
                        </div>
                        <div class="school-cards">
        `;

                // 为每个学校生成模拟的院校介绍数据
                const schoolDescriptions = {
                    'The Australian National University (ANU)': '澳大利亚国立大学（ANU）成立于1946年，位于澳大利亚首都堪培拉，是澳大利亚历史最悠久的研究型大学之一。作为澳大利亚八大名校（Group of Eight）成员，ANU在全球高等教育领域享有盛誉，特别是在计算机科学、人工智能和数据科学领域的研究与教学处于世界前列。学校拥有先进的研究设施和一流的师资力量，与全球众多顶尖科研机构和企业保持紧密合作关系。ANU以其严谨的学术传统、创新的教学方法和多元文化的校园环境吸引着来自世界各地的优秀学生。该校计算机科学专业的毕业生在全球就业市场上极具竞争力，许多校友在科技巨头和创新企业担任重要职位。',
                    'The University of Melbourne': '墨尔本大学创建于1853年，是澳大利亚历史第二悠久的大学，也是澳大利亚最负盛名的学府之一。作为澳大利亚八大名校（Group of Eight）的创始成员，墨尔本大学在全球教育和研究领域始终保持领先地位。学校位于充满活力的墨尔本市中心，拥有独特的古典与现代相结合的校园建筑。墨尔本大学的计算机科学和软件工程专业在全球享有极高声誉，其研究成果广泛应用于工业界和商业领域。学校与众多国际技术公司和研究机构建立了紧密的合作关系，为学生提供丰富的实习和就业机会。墨尔本大学独特的"墨尔本模式"教育体系为学生提供跨学科学习的灵活性，培养学生的创新思维和解决实际问题的能力。',
                    'The University of Sydney': '悉尼大学成立于1850年，是澳大利亚历史最悠久的大学，也是南半球最早的大学之一。作为澳大利亚八大名校（Group of Eight）的重要成员，悉尼大学在全球教育和研究领域享有盛誉。学校坐落于澳大利亚最大城市悉尼，校园建筑融合了哥特式和现代风格，环境优美。悉尼大学的计算机科学和软件工程专业处于世界领先水平，其创新研究在人工智能、网络安全和大数据分析等前沿领域取得了显著成果。学校与众多全球顶尖科技企业保持密切合作，为学生提供丰富的实践机会和行业连接。悉尼大学重视培养学生的批判性思维和实践能力，其毕业生在全球就业市场上备受青睐，许多校友在国际知名企业和研究机构担任重要职位。'
                };

                // 扩展专业介绍的内容
                const extendedIntroductions = {
                    'Master of Computing (Advanced)': '该专业专注于计算机领域的先进技术研究与应用，涵盖编程、算法、数据结构、人工智能、机器学习、数据挖掘、计算机视觉、自然语言处理等多个前沿方向。课程设计注重理论与实践相结合，学生将通过参与实际项目开发和研究活动，培养解决复杂问题的能力。该专业提供灵活的课程选择，允许学生根据自己的兴趣和职业规划定制学习路径。课程由经验丰富的教授和行业专家授课，确保学生掌握最新技术和行业动态。毕业生具备系统的计算机科学知识和扎实的编程技能，能够在科技公司、研究机构和高等院校等各类组织中担任高级技术或研究职位。',
                    'Master of Computer Science': '主要研究计算机科学的基础理论和前沿技术，为学生提供深入的专业知识和实践技能。课程内容全面涵盖算法分析、高级数据结构、分布式系统、云计算、高性能计算、网络安全、数据库系统等关键领域。该专业强调培养学生的批判性思维和创新能力，通过研讨会、案例分析和项目实践等多种教学方式，帮助学生应对计算机科学领域的复杂挑战。学生有机会接触最新研究成果和技术趋势，并通过毕业项目展示自己的专业能力。该专业与工业界保持紧密联系，定期邀请行业专家进行讲座和指导，确保教学内容与行业需求同步。毕业生在软件开发、系统架构、技术咨询等多个领域具有出色的职业发展前景。',
                    'Master of Professional Engineering (Accelerated)(Software Engineering)': '该专业专注于软件工程领域，结合了工程实践与软件开发技能，采用加速课程设计，帮助学生在较短时间内掌握专业知识。课程涵盖软件架构设计、需求分析、系统测试、质量保证、项目管理、DevOps、敏捷开发方法等核心内容。学生将学习如何应用工程原理解决软件开发中的实际问题，并通过团队协作完成大型软件项目。该专业注重培养学生的技术领导力和沟通能力，使毕业生能够在多元化团队中有效工作。课程设计结合了最新的行业标准和最佳实践，帮助学生适应快速变化的软件行业。该专业还提供行业实习机会，让学生在实际工作环境中应用所学知识，积累宝贵的专业经验。毕业生在软件开发、系统集成、技术管理等领域拥有广阔的就业前景。',
                    'Master of Software Engineering': '主要研究软件工程相关知识与技术，旨在培养具备软件系统设计、开发和维护能力的高级专业人才。课程内容包括软件过程改进、高级软件设计模式、企业级应用开发、移动应用开发、云服务架构、软件测试与验证、用户体验设计等领域。学生将学习如何规划和管理大型软件项目，确保软件产品的质量和可靠性。该专业强调实践教学，学生将参与真实项目或模拟企业环境中的软件开发过程，培养团队协作和问题解决能力。课程设置灵活，允许学生在网络安全、人工智能应用、游戏开发等方向进行专业选择。该专业与业界保持密切合作，定期更新课程内容，确保学生掌握行业最新技术和方法。毕业生在各类软件公司、IT咨询机构和科技企业中拥有良好的就业机会。'
                };

                // 添加学校卡片
                if (data.list && data.list.length > 0) {
                    data.list.forEach((school, index) => {
                        let typeClass = '';
                        switch (school.type) {
                            case '冲刺':
                                typeClass = 'challenge';
                                break;
                            case '稳妥':
                                typeClass = 'safe';
                                break;
                        }

                        // 计算星级评分（将原来的recommend_rate转为5星制）
                        let starCount = Math.round(school.recommend_rate / 2);
                        let starHtml = '';
                        for (let i = 1; i <= 5; i++) {
                            if (i <= starCount) {
                                starHtml += '<i class="bi bi-star-fill"></i>';
                            } else {
                                starHtml += '<i class="bi bi-star-fill empty"></i>';
                            }
                        }

                        // 从Label中拆分特点标签（以/分割）
                        const featureTags = school.Label ? school.Label.split('/') : [];
                        let featureTagsHtml = '';
                        featureTags.forEach(tag => {
                            featureTagsHtml += `<div class="feature-tag">${tag}</div>`;
                        });

                        // 处理语言要求和学术要求
                        let languageRequirement = 'IELTS: 6.5 (各单项不低于6.0)';
                        if (school.language_requirement) {
                            if (typeof school.language_requirement === 'object') {
                                const requirements = [];
                                if (school.language_requirement.IELTS) {
                                    requirements.push(`IELTS: ${school.language_requirement.IELTS}`);
                                }
                                if (school.language_requirement.TOEFL) {
                                    requirements.push(`TOEFL: ${school.language_requirement.TOEFL}`);
                                }
                                languageRequirement = requirements.join(' 或 ');
                            } else {
                                languageRequirement = school.language_requirement;
                            }
                        }

                        let academicRequirement = '本科相关专业，平均分75%以上';
                        if (school.academic_requirement) {
                            if (typeof school.academic_requirement === 'object') {
                                const requirements = [];
                                if (school.academic_requirement.GPA) {
                                    requirements.push(`GPA: ${school.academic_requirement.GPA}`);
                                }
                                if (school.academic_requirement.Background) {
                                    requirements.push(`背景: ${school.academic_requirement.Background}`);
                                }
                                academicRequirement = requirements.join(', ');
                            } else {
                                academicRequirement = school.academic_requirement;
                            }
                        }

                        // 获取扩展的专业介绍文本
                        const extendedIntro = extendedIntroductions[school.project_name] || school.Introduction;

                        // 获取院校介绍
                        const schoolDescription = schoolDescriptions[school.school_name] || '该院校是一所享有盛誉的高等教育机构，提供优质的教育和研究机会。';

                        // 使用base64编码的简单图标作为学校logo
                        let schoolLogoUrl;
                        const firstLetter = school.school_name.charAt(0).toUpperCase();

                        // 生成不同背景色的logo
                        const colorMap = {
                            'M': '#4285f4', // 墨尔本蓝色
                            'S': '#0f9d58', // 悉尼绿色
                            'A': '#db4437', // ANU红色
                            'T': '#f4b400'  // 默认黄色
                        };

                        const bgColor = colorMap[firstLetter] || '#4285f4';

                        // 使用Data URL创建简单的文本logo
                        schoolLogoUrl = `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><circle cx="18" cy="18" r="18" fill="${bgColor}"/><text x="18" y="23" font-family="Arial" font-size="16" font-weight="bold" fill="white" text-anchor="middle">${firstLetter}</text></svg>`;

                        recommendationHTML += `
                    <div class="school-card">
                        <div class="scheme-number">${index + 1}</div>
                        <div class="school-header">
                            <div class="school-name-container">
                                <div class="school-logo">
                                    <img src="https://ks3-cn-beijing.ksyun.com/aojixiaoxi/image/xschool/1639214041196899.jpg" alt="${school.school_name} logo">
                                </div>
                                <div class="school-name">${school.school_name}</div>
                                <div class="star-rating-container">
                                    <div class="star-rating-label">推荐星级</div>
                                    <div class="star-rating">${starHtml}</div>
                                </div>
                            </div>
                            <div class="program-name">${school.project_name}</div>
                            <div class="tag-container">
                                <div class="school-type ${typeClass}">${school.type}</div>
                                <div class="qs-ranking"><i class="bi bi-award"></i>QS排名：${school.qs_ranking || 'N/A'}</div>
                                ${featureTagsHtml}
                                <div class="detail-chip duration-chip">${school.duration || '1-2年'}</div>
                                <div class="detail-chip tuition-chip">${school.tuition_fee || '$20,000-$30,000'}</div>
                            </div>
                        </div>
                        <div class="school-content">
                            <div class="details-row">
                                <div class="details-label">语言要求</div>
                                <div class="details-value">${languageRequirement}</div>
                            </div>
                            <div class="details-row">
                                <div class="details-label">学术要求</div>
                                <div class="details-value">${academicRequirement}</div>
                            </div>
                            <button class="toggle-details-btn" title="查看更多信息">
                                <i class="bi bi-chevron-down"></i>
                            </button>
                        </div>
                        <div class="expanded-details">
                            <div class="details-section">
                                <div class="details-row">
                                    <div class="details-label">专业链接</div>
                                    <div class="details-value"><a href="${school.detail_url || '#'}" target="_blank">${school.detail_url || '暂无数据'}</a></div>
                                </div>
                            </div>
                            <div class="details-section">
                                <div class="details-title">申请建议</div>
                                <div class="details-content">${school.applicate_suggestion}</div>
                            </div>
                            <div class="details-section">
                                <div class="details-title">专业介绍</div>
                                <div class="details-content">${extendedIntro}</div>
                            </div>
                            <div class="details-section">
                                <div class="details-title">院校介绍</div>
                                <div class="details-content">${schoolDescription}</div>
                            </div>
                        </div>
                    </div>
                `;
                    });
                }

                recommendationHTML += `
                        </div>
                    </div>
                </div>
                <div class="message-actions">
                    <div class="action-buttons-group">
                        <button class="message-action-btn refresh-btn" title="刷新方案">
                            <i class="bi bi-arrow-clockwise"></i>
                        </button>
                        <button class="message-action-btn copy-btn" title="复制方案">
                            <i class="bi bi-clipboard"></i>
                        </button>
                        <button class="message-action-btn like-btn" title="点赞">
                            <i class="bi bi-hand-thumbs-up"></i>
                        </button>
                        <button class="message-action-btn dislike-btn" title="点踩">
                            <i class="bi bi-hand-thumbs-down"></i>
                        </button>
                    </div>
                    <div class="action-hint-text"><a href="#" class="resource-link">点击这里</a>创建资源，可将上述方案同步至申请流程~</div>
                </div>
            </div>
            <div class="message-time">${new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })}</div>
        `;

                messageDiv.innerHTML = recommendationHTML;
                chatContent.appendChild(messageDiv);
                chatContent.scrollTop = chatContent.scrollHeight;

                // 添加展开/收起卡片详情的点击事件
                const toggleButtons = messageDiv.querySelectorAll('.toggle-details-btn');
                toggleButtons.forEach(button => {
                    button.addEventListener('click', function (e) {
                        e.preventDefault();
                        const schoolCard = this.closest('.school-card');
                        schoolCard.classList.toggle('expanded');
                    });
                });

                // 添加功能按钮的点击事件
                const refreshBtn = messageDiv.querySelector('.refresh-btn');
                if (refreshBtn) {
                    refreshBtn.addEventListener('click', function () {
                        // 刷新方案的逻辑
                        showToast('正在刷新方案...');
                        // 这里可以添加刷新方案的具体实现
                    });
                }

                const copyBtn = messageDiv.querySelector('.copy-btn');
                if (copyBtn) {
                    copyBtn.addEventListener('click', function () {
                        // 复制方案的逻辑
                        const content = this.closest('.message-content').querySelector('.recommendation-cards').innerText;
                        navigator.clipboard.writeText(content)
                            .then(() => showToast('方案已复制到剪贴板'))
                            .catch(() => showToast('复制失败，请重试'));
                    });
                }

                const likeBtn = messageDiv.querySelector('.like-btn');
                if (likeBtn) {
                    likeBtn.addEventListener('click', function () {
                        // 点赞的逻辑
                        this.classList.toggle('active');
                        const dislikeBtn = this.closest('.message-actions').querySelector('.dislike-btn');
                        if (dislikeBtn.classList.contains('active')) {
                            dislikeBtn.classList.remove('active');
                        }
                        showToast('感谢您的反馈！');
                    });
                }

                const dislikeBtn = messageDiv.querySelector('.dislike-btn');
                if (dislikeBtn) {
                    dislikeBtn.addEventListener('click', function () {
                        // 点踩的逻辑
                        this.classList.toggle('active');
                        const likeBtn = this.closest('.message-actions').querySelector('.like-btn');
                        if (likeBtn.classList.contains('active')) {
                            likeBtn.classList.remove('active');
                        }
                        showToast('感谢您的反馈！');
                    });
                }

                // 资源链接点击事件
                const resourceLink = messageDiv.querySelector('.resource-link');
                if (resourceLink) {
                    resourceLink.addEventListener('click', function (e) {
                        e.preventDefault();
                        console.log('创建资源链接被点击');
                        // 这里可以添加创建资源的逻辑
                        addMessage('ai', '正在将方案同步至送生流程，请稍候...');
                    });
                }

            }

            // 添加消息到聊天框
            function addMessage(sender, content) {
                const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
                const messageDiv = document.createElement('div');
                messageDiv.className = 'chat-message';

                if (sender === 'user') {
                    messageDiv.innerHTML = `
                <div class="message-content" style="margin-left: auto; background-color: var(--primary); color: white;">
                    <div>${content}</div>
                </div>
                <img src="assets/avatar.png" alt="用户" class="chat-avatar" style="margin-left: var(--spacing-md); margin-right: 0;">
                <div class="message-time" style="right: 54px; left: auto; text-align: right;">${time}</div>
            `;
                } else {
                    messageDiv.innerHTML = `
                <img src="https://images.unsplash.com/photo-1531746790731-6c087fecd65a?q=80&w=1000&auto=format&fit=crop" alt="AI" class="chat-avatar">
                <div class="message-content">
                    <div>${content}</div>
                </div>
                <div class="message-time">${time}</div>
            `;
                }

                if (chatContent) {
                    chatContent.appendChild(messageDiv);
                    chatContent.scrollTop = chatContent.scrollHeight;
                }
            }

            // 处理发送消息
            function sendMessage() {
                if (!chatInput) return;

                const message = chatInput.value.trim();
                if (!message) return;

                // 添加用户消息
                addMessage('user', message);
                chatInput.value = '';

                // 对任何消息都显示JSON数据
                setTimeout(() => {
                    console.log('尝试显示推荐方案, JSON数据状态:', jsonData ? '已加载' : '未加载');

                    if (jsonData) {
                        displayRecommendation(jsonData);
                    } else {
                        addMessage('ai', '正在加载推荐方案数据，请稍候...');

                        // 内联加载JSON数据
                        const jsonString = `{
                    "type": "plan",
                    "message": "",
                    "recommend": {
                        "Advantages": "本科毕业于 985 院校北京理工大学，成绩 89 分，有一定优势。",
                        "Lifting_Point": "可进一步提升编程技能和项目经验，以增强申请竞争力。",
                        "Points": "推荐专业均与计算机方向高度一致，各院校在计算机领域有良好声誉。"
                    },
                    "list": [
                        {
                            "Introduction": "该专业专注于计算机领域的先进技术研究与应用，涵盖编程、算法、数据结构等多个方面。",
                            "Label": "排名高/就业广",
                            "applicate_suggestion": "建议提前准备好个人陈述、推荐信等材料，同时注重提升相关编程技能。",
                            "direction_relevance": 10,
                            "project_id": "159990",
                            "project_name": "Master of Computing (Advanced)",
                            "recommend_rate": 8,
                            "recommend_reason": "专业与用户意向的计算机方向高度匹配，ANU 院校声誉良好，且该专业在计算机领域具有较高的知名度和影响力。",
                            "school_name": "The Australian National University (ANU)",
                            "type": "冲刺",
                            "qs_ranking": 27,
                            "tuition_fee": "46,000 澳币/年",
                            "duration": "2年",
                            "detail_url": "https://www.anu.edu.au/study/study-options/master-of-computing-advanced",
                            "language_requirement": {
                                "IELTS": "6.5分，单项不低于6.0",
                                "TOEFL": "80分，写作不低于22"
                            },
                            "academic_requirement": {
                                "GPA": "80%以上或同等水平",
                                "Background": "计算机科学或相关领域学士学位"
                            }
                        },
                        {
                            "Introduction": "主要研究计算机科学的基础理论和前沿技术，为学生提供深入的专业知识和实践技能。",
                            "Label": "排名高/就业广",
                            "applicate_suggestion": "需提前了解该校的申请要求和流程，准备好相关考试成绩。",
                            "direction_relevance": 9,
                            "project_id": "159256",
                            "project_name": "Master of Computer Science",
                            "recommend_rate": 7,
                            "recommend_reason": "专业实力较强，与用户意向相符，墨尔本大学在全球享有较高的声誉。",
                            "school_name": "The University of Melbourne",
                            "type": "冲刺",
                            "qs_ranking": 14,
                            "tuition_fee": "48,500 澳币/年",
                            "duration": "2年",
                            "detail_url": "https://study.unimelb.edu.au/find/courses/graduate/master-of-computer-science/",
                            "language_requirement": {
                                "IELTS": "6.5分，单项不低于6.0",
                                "TOEFL": "79分，写作不低于21"
                            },
                            "academic_requirement": {
                                "GPA": "75%以上或同等水平",
                                "Background": "计算机科学或相关工程学士学位"
                            }
                        },
                        {
                            "Introduction": "该专业专注于软件工程领域，结合了工程实践与软件开发技能。",
                            "Label": "排名高/就业广",
                            "applicate_suggestion": "建议提前准备好相关项目经验和编程技能证明。",
                            "direction_relevance": 10,
                            "project_id": "157476",
                            "project_name": "Master of Professional Engineering (Accelerated)(Software Engineering)",
                            "recommend_rate": 8,
                            "recommend_reason": "专业与目标方向计算机紧密相关，且悉尼大学声誉良好。",
                            "school_name": "The University of Sydney",
                            "type": "冲刺",
                            "qs_ranking": 19,
                            "tuition_fee": "49,500 澳币/年",
                            "duration": "1.5年",
                            "detail_url": "https://www.sydney.edu.au/courses/courses/pc/master-of-professional-engineering-accelerated-software.html",
                            "language_requirement": {
                                "IELTS": "7.0分，单项不低于6.0",
                                "TOEFL": "85分，单项不低于19"
                            },
                            "academic_requirement": {
                                "GPA": "82%以上或同等水平",
                                "Background": "软件工程、计算机科学或相关工程学士学位"
                            }
                        },
                        {
                            "Introduction": "主要研究软件工程相关知识与技术。",
                            "Label": "排名高/就业广",
                            "applicate_suggestion": "需注重编程实践和项目经验的积累。",
                            "direction_relevance": 10,
                            "project_id": "158917",
                            "project_name": "Master of Software Engineering",
                            "recommend_rate": 8,
                            "recommend_reason": "专业符合目标方向，墨尔本大学在计算机领域有优势。",
                            "school_name": "The University of Melbourne",
                            "type": "稳妥",
                            "qs_ranking": 14,
                            "tuition_fee": "47,500 澳币/年",
                            "duration": "2年",
                            "detail_url": "https://study.unimelb.edu.au/find/courses/graduate/master-of-software-engineering/",
                            "language_requirement": {
                                "IELTS": "6.5分，单项不低于6.0",
                                "TOEFL": "79分，写作不低于21"
                            },
                            "academic_requirement": {
                                "GPA": "70%以上或同等水平",
                                "Background": "软件工程、计算机科学或信息技术学士学位"
                            }
                        },
                        {
                            "Introduction": "专注于计算机科学领域的深入研究。",
                            "Label": "排名高/就业广",
                            "applicate_suggestion": "提前准备好计算机基础课程的学习证明。",
                            "direction_relevance": 10,
                            "project_id": "174916",
                            "project_name": "Master of Computer Science",
                            "recommend_rate": 8,
                            "recommend_reason": "专业与目标方向高度契合，悉尼大学实力强。",
                            "school_name": "The University of Sydney",
                            "type": "稳妥",
                            "qs_ranking": 19,
                            "tuition_fee": "48,000 澳币/年",
                            "duration": "2年",
                            "detail_url": "https://www.sydney.edu.au/courses/courses/pc/master-of-computer-science.html",
                            "language_requirement": {
                                "IELTS": "6.5分，单项不低于6.0",
                                "TOEFL": "85分，单项不低于17"
                            },
                            "academic_requirement": {
                                "GPA": "75%以上或同等水平",
                                "Background": "计算机科学或具有计算机背景的理学学士学位"
                            }
                        }
                    ]
                }`;

                        try {
                            const hardcodedData = JSON.parse(jsonString);
                            jsonData = hardcodedData;
                            setTimeout(() => {
                                displayRecommendation(jsonData);
                            }, 1000);
                        } catch (error) {
                            console.error('解析硬编码JSON失败:', error);
                            addMessage('ai', '抱歉，无法加载推荐方案数据。');
                        }
                    }
                }, 500);
            }

            // AI输入框相关事件
            if (aiInput && aiSendBtn) {
                aiInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        const chatDrawer = document.querySelector('.chat-drawer');
                        const drawerOverlay = document.querySelector('.drawer-overlay');

                        if (chatDrawer && drawerOverlay && chatInput) {
                            chatDrawer.classList.add('active');
                            drawerOverlay.classList.add('active');
                            chatInput.value = this.value;
                            this.value = '';

                            setTimeout(() => {
                                if (chatInput.value) {
                                    sendMessage();
                                }
                            }, 300);
                        }
                    }
                });

                aiSendBtn.addEventListener('click', function () {
                    const chatDrawer = document.querySelector('.chat-drawer');
                    const drawerOverlay = document.querySelector('.drawer-overlay');

                    if (chatDrawer && drawerOverlay && chatInput && aiInput.value.trim()) {
                        chatDrawer.classList.add('active');
                        drawerOverlay.classList.add('active');
                        chatInput.value = aiInput.value;
                        aiInput.value = '';

                        setTimeout(() => {
                            if (chatInput.value) {
                                sendMessage();
                            }
                        }, 300);
                    }
                });
            }

            // 聊天输入框相关事件
            if (chatInput) {
                // 监听Enter键发送消息
                chatInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });

                // 处理输入框高度自适应
                chatInput.addEventListener('input', function () {
                    this.style.height = 'auto';
                    this.style.height = (this.scrollHeight) + 'px';
                    if (this.scrollHeight > 120) {
                        this.style.height = '120px';
                    }
                });
            }

            // 监听发送按钮点击
            if (sendButton) {
                sendButton.addEventListener('click', sendMessage);
            }

            // 监听AI建议问题点击事件
            if (suggestionChips.length > 0) {
                suggestionChips.forEach(chip => {
                    chip.addEventListener('click', function () {
                        const chatDrawer = document.querySelector('.chat-drawer');
                        const drawerOverlay = document.querySelector('.drawer-overlay');

                        if (chatDrawer && drawerOverlay && chatInput) {
                            chatDrawer.classList.add('active');
                            drawerOverlay.classList.add('active');
                            chatInput.value = this.textContent;

                            setTimeout(() => {
                                sendMessage();
                            }, 300);
                        }
                    });
                });
            }

            // 监听底部工具按钮点击
            if (bottomToolButtons.length > 0) {
                bottomToolButtons.forEach(button => {
                    button.addEventListener('click', function () {
                        const toolName = this.textContent.trim();
                        addMessage('user', `我想使用${toolName}`);

                        setTimeout(() => {
                            if (jsonData) {
                                displayRecommendation(jsonData);
                            } else {
                                addMessage('ai', '正在加载推荐方案数据，请稍候...');

                                // 加载内联JSON数据
                                try {
                                    const jsonString = `{
                                "type": "plan",
                                "message": "",
                                "recommend": {
                                    "Advantages": "本科毕业于 985 院校北京理工大学，成绩 89 分，有一定优势。",
                                    "Lifting_Point": "可进一步提升编程技能和项目经验，以增强申请竞争力。",
                                    "Points": "推荐专业均与计算机方向高度一致，各院校在计算机领域有良好声誉。"
                                },
                                "list": [
                                    {
                                        "Introduction": "该专业专注于计算机领域的先进技术研究与应用，涵盖编程、算法、数据结构等多个方面。",
                                        "Label": "排名高/就业广",
                                        "applicate_suggestion": "建议提前准备好个人陈述、推荐信等材料，同时注重提升相关编程技能。",
                                        "direction_relevance": 10,
                                        "project_id": "159990",
                                        "project_name": "Master of Computing (Advanced)",
                                        "recommend_rate": 8,
                                        "recommend_reason": "专业与用户意向的计算机方向高度匹配，ANU 院校声誉良好，且该专业在计算机领域具有较高的知名度和影响力。",
                                        "school_name": "The Australian National University (ANU)",
                                        "type": "冲刺",
                                        "qs_ranking": 27,
                                        "tuition_fee": "46,000 澳币/年",
                                        "duration": "2年",
                                        "detail_url": "https://www.anu.edu.au/study/study-options/master-of-computing-advanced",
                                        "language_requirement": {
                                            "IELTS": "6.5分，单项不低于6.0",
                                            "TOEFL": "80分，写作不低于22"
                                        },
                                        "academic_requirement": {
                                            "GPA": "80%以上或同等水平",
                                            "Background": "计算机科学或相关领域学士学位"
                                        }
                                    },
                                    {
                                        "Introduction": "主要研究计算机科学的基础理论和前沿技术，为学生提供深入的专业知识和实践技能。",
                                        "Label": "排名高/就业广",
                                        "applicate_suggestion": "需提前了解该校的申请要求和流程，准备好相关考试成绩。",
                                        "direction_relevance": 9,
                                        "project_id": "159256",
                                        "project_name": "Master of Computer Science",
                                        "recommend_rate": 7,
                                        "recommend_reason": "专业实力较强，与用户意向相符，墨尔本大学在全球享有较高的声誉。",
                                        "school_name": "The University of Melbourne",
                                        "type": "冲刺",
                                        "qs_ranking": 14,
                                        "tuition_fee": "48,500 澳币/年",
                                        "duration": "2年",
                                        "detail_url": "https://study.unimelb.edu.au/find/courses/graduate/master-of-computer-science/",
                                        "language_requirement": {
                                            "IELTS": "6.5分，单项不低于6.0",
                                            "TOEFL": "79分，写作不低于21"
                                        },
                                        "academic_requirement": {
                                            "GPA": "75%以上或同等水平",
                                            "Background": "计算机科学或相关工程学士学位"
                                        }
                                    },
                                    {
                                        "Introduction": "该专业专注于软件工程领域，结合了工程实践与软件开发技能。",
                                        "Label": "排名高/就业广",
                                        "applicate_suggestion": "建议提前准备好相关项目经验和编程技能证明。",
                                        "direction_relevance": 10,
                                        "project_id": "157476",
                                        "project_name": "Master of Professional Engineering (Accelerated)(Software Engineering)",
                                        "recommend_rate": 8,
                                        "recommend_reason": "专业与目标方向计算机紧密相关，且悉尼大学声誉良好。",
                                        "school_name": "The University of Sydney",
                                        "type": "冲刺",
                                        "qs_ranking": 19,
                                        "tuition_fee": "49,500 澳币/年",
                                        "duration": "1.5年",
                                        "detail_url": "https://www.sydney.edu.au/courses/courses/pc/master-of-professional-engineering-accelerated-software.html",
                                        "language_requirement": {
                                            "IELTS": "7.0分，单项不低于6.0",
                                            "TOEFL": "85分，单项不低于19"
                                        },
                                        "academic_requirement": {
                                            "GPA": "82%以上或同等水平",
                                            "Background": "软件工程、计算机科学或相关工程学士学位"
                                        }
                                    },
                                    {
                                        "Introduction": "主要研究软件工程相关知识与技术。",
                                        "Label": "排名高/就业广",
                                        "applicate_suggestion": "需注重编程实践和项目经验的积累。",
                                        "direction_relevance": 10,
                                        "project_id": "158917",
                                        "project_name": "Master of Software Engineering",
                                        "recommend_rate": 8,
                                        "recommend_reason": "专业符合目标方向，墨尔本大学在计算机领域有优势。",
                                        "school_name": "The University of Melbourne",
                                        "type": "稳妥",
                                        "qs_ranking": 14,
                                        "tuition_fee": "47,500 澳币/年",
                                        "duration": "2年",
                                        "detail_url": "https://study.unimelb.edu.au/find/courses/graduate/master-of-software-engineering/",
                                        "language_requirement": {
                                            "IELTS": "6.5分，单项不低于6.0",
                                            "TOEFL": "79分，写作不低于21"
                                        },
                                        "academic_requirement": {
                                            "GPA": "70%以上或同等水平",
                                            "Background": "软件工程、计算机科学或信息技术学士学位"
                                        }
                                    },
                                    {
                                        "Introduction": "专注于计算机科学领域的深入研究。",
                                        "Label": "排名高/就业广",
                                        "applicate_suggestion": "提前准备好计算机基础课程的学习证明。",
                                        "direction_relevance": 10,
                                        "project_id": "174916",
                                        "project_name": "Master of Computer Science",
                                        "recommend_rate": 8,
                                        "recommend_reason": "专业与目标方向高度契合，悉尼大学实力强。",
                                        "school_name": "The University of Sydney",
                                        "type": "稳妥",
                                        "qs_ranking": 19,
                                        "tuition_fee": "48,000 澳币/年",
                                        "duration": "2年",
                                        "detail_url": "https://www.sydney.edu.au/courses/courses/pc/master-of-computer-science.html",
                                        "language_requirement": {
                                            "IELTS": "6.5分，单项不低于6.0",
                                            "TOEFL": "85分，单项不低于17"
                                        },
                                        "academic_requirement": {
                                            "GPA": "75%以上或同等水平",
                                            "Background": "计算机科学或具有计算机背景的理学学士学位"
                                        }
                                    }
                                ]
                            }`;
                                    const hardcodedData = JSON.parse(jsonString);
                                    jsonData = hardcodedData;
                                    setTimeout(() => {
                                        displayRecommendation(jsonData);
                                    }, 1000);
                                } catch (error) {
                                    console.error('解析硬编码JSON失败:', error);
                                    addMessage('ai', '抱歉，无法加载推荐方案数据。');
                                }
                            }
                        }, 500);
                    });
                });
            }
        }

        function getCurrentTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            return `${hours}:${minutes}`;
        }
    </script>
</body>

</html>
