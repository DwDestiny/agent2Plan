# 定校2.5二期需求文档

## 1. 需求概览

### 需求背景
1. 当前页面交互不支持用户更改意向再次做方案；
2. 当前页面信息量太少，且没有展示出AI方案的内容（申请建议等）；

### 主要改动点
1. 前端：留学方案列表页样式与交互改变；
2. 提交人工功能优化：提人工时填写的反馈内容和留学需求中的其他要求，不要相互覆盖，改为拼接：其他要求：XXXX ；备注：XXXX；
扩充；提交人工后，资源状态变为：制作中，人工推回后状态变为：已完成；
3. 申请要点中按逻辑拼接语言要求的文案；

#### 功能点 1：方案列表页面功能按钮优化
- **交互逻辑**：优化页面头部功能按钮和交互行为优化
- **数据来源**：-
- **具体要求**：
  1. 保留现有的"下载方案模板"功能按钮，用于导出方案模板
  2. 保留"添加院校"功能按钮，用于展示额外的方案选项
  3. 保留"提交人工优化"功能按钮，用于将方案提交给顾问人工优化
  4. 新增"重新推荐方案"功能按钮，整合新的智能体调用逻辑
  5. 新增"功能引导"按钮，优化引导流程和视觉提示
  6. 新增方案详情的收起/展开功能，详见UI；
  7. 新增按国家分栏的展示，详见UI；

#### 功能点 2：方案卡片展示优化
- **交互逻辑**：优化方案卡片内容的展示布局，保持现有功能，新增信息展开/收起按钮
- **数据来源**：智能体方案数据
- **具体要求**：
  1. 优化卡片内容的展示布局
  2. 保持现有功能
  3. 增加信息展开/收起按钮
  4. 根据原型实现信息与排版
  5. 若返回内容缺失或触发保底走老逻辑返回，或人工优化返回，缺失标签不展示即可

#### 功能点 3：方案操作功能新增
- **交互逻辑**：布局调整，突出方案锁定与方案同步按钮，原有其他功能收起到更多功能菜单，新增方案锁定功能
- **数据来源**：-
- **具体要求**：
  1. 保留同步到定校功能
  2. 新增方案锁定功能，确保重新推荐时不会刷新锁定的方案、人工推荐不受该影响
  3. 保留更多菜单中的编辑方案、复制方案、查看申请材料、删除方案等功能
  4. 编辑点击后，弹窗，窗体主要内容为表单，详见UI稿，用户在表单中进行方案编辑与保存；

#### 功能点 4：方案关注功能
- **交互逻辑**：实现方案关注功能，防止方案刷新
- **数据来源**：-
- **具体要求**：
  1. 在方案卡片右上角添加关注/取消关注按钮，使用心形图标直观展示状态，详见UI；
  2. 关注状态下，方案不能被删除或重新推荐，点击删除给出提示：您已关注该方案，不可删除，可编辑信息；
  3. 关注状态在数据库存储，确保刷新页面后状态不丢失；
  4. 提交人工：方案任务台 - 方案信息添加标注，用户是否关注，对于用户已关注的方案，方案名前添加红色字体标注，表明方案已经被用户关注；
     ![image](https://github.com/user-attachments/assets/f10cec8c-cf4a-4124-9cda-7db1e209f586)
    关注的方案不可被业务人员删除，点击删除时toast提示：用户已关注该方案，不可删除，请给出申请建议！专业信息可被人工修改；
     ![image](https://github.com/user-attachments/assets/2b2bf296-a836-4b95-aa09-1f571d4919c4)

#### 功能点 5：重新推荐方案
- **交互逻辑**：实现方案重新推荐功能，通过智能体生成新的方案
- **数据来源**：智能体推荐数据
- **具体要求**：
  1. 点击"重新推荐方案"按钮后，弹出抽屉，显示需填写的表单信息，内容详见UI；
  2. 已关注的方案不会被重新推荐刷新；
  3. 锁定方案不影响重新推荐的方案数量，锁定3所，重新推荐出另外5所，则共8所，所以重新推荐走智能体接口时，需要将当前已关注的方案id一同拼接到prompt中推送给智能体：eg：以下方案不在考虑范围：[102114,112345,245124]；
  4. 需调整智能体逻辑，识别到关注的方案列表，则需要在方案筛选中将已关注的方案过滤掉；
  5. 点击重新推荐时，方案面板出现三步式加载动画，其他方案被隐藏，重新调取AI接口出方案；
  6. 方案列表入库时增加去重功能，若专业id已在方案列表且未删除，则跳过这条数据不插入，避免因智能体识别失败等原因导致关注的方案重复出现；
  7. 记录资源重新推荐次数，用于上线后的数据分析；

#### 功能点 6：编辑功能优化
- **交互逻辑**：将编辑功能收起到更多功能菜单，点击后弹窗进行方案表单编辑，具体字段详见原型；
- **数据来源**：方案数据和用户编辑内容
- **具体要求**：
  1. 保留现有编辑对话框的布局和字段结构
  2. 确保所有可编辑字段正确显示并支持用户修改
  3. 保留只读字段的样式和标识
  4. 现有的必填字段规则以及字段内容校验不变；
  5. 具体字段详见UI稿

#### 功能点 7：提交人工功能优化
> 当用户填写其他要求后 又提交人工反馈时，会再次填写一个提交反馈，但当前这个反馈会将其他要求覆盖，导致原始需求丢失，平台老师与代理信息不同步
- **交互逻辑**：优化提交平台反馈信息的处理逻辑
- **数据来源**：用户提交的反馈信息
- **具体要求**：
  1. 点击提交人工优化时，弹的反馈窗口，将现在用户已经填写的其他要求带入，让用户认知上也知道，其他要求和提交人工的反馈，是同一个字段；
     ![image](https://github.com/user-attachments/assets/d15315c5-1f4b-4d5f-a0e2-2cd49a6998a9)
  2. 方案列表-选校方案字段：现有逻辑：根据方案列表数量判断，制作或x所已完成，需添加一个人工优化中的状态，逻辑调整为：
     1. 优先判断：用户若提交人工且未完成平台优化，则状态为平台优化中；
     2. 若方案列表数量大于0，则状态为X所已完成；
     3. 若方案列表数量 = 0，则状态为未制作；
      ![image](https://github.com/user-attachments/assets/92cda8e2-79c5-4855-b7be-a5e5221f7721)


#### 功能点 8：成绩类型默认值优化
- **交互逻辑**：根据用户背景学历自动设置成绩类型默认值
- **数据来源**：用户背景学历信息
- **具体要求**：
  1. 当用户背景学历为硕士时，自动将教育背景成绩类型设置为"其他成绩类型"，PC\移动同时修改

#### 功能点 9: 添加语培测评链接
- **交互逻辑**：根据用户是否填写语言成绩判断是否拼接相关文案
- **数据来源**：用户背景信息
- **具体要求**：
  1. 当用户提交表单信息中有雅思成绩，则不做任何处理；
  2. 当用户提交表单信息中没有雅思成绩，则在提升点的内容中，拼接文案（文案待定，业务确认中）：给您推荐的院校方案专业语言要求为雅思（6.0-7.0），建议[点击进行测评](www.baidu.com)

#### 功能点 10：下载模板优化
- **交互逻辑**：优化下载模板的展示和下载功能
- **数据来源**：模板数据和用户信息
- **具体要求**：
  1. 按照UI设计调整模板样式，突出展示补充信息
  2. 当字段内容为空时自动隐藏该字段
  3. 预览功能改为直接使用页面展示，不再生成PDF
  4. 下载时直接调用页面打印功能生成PDF文件
 
#### 注：小希云服务不做方案锁定和重新推荐功能，仅做页面信息展示的优化，等三端合并统一设计即可；


 
